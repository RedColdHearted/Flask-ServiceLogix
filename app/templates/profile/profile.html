<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Умная улица</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
</head>
<body>
    <div class="container my-5">
        <h1 class="text-center">Система "Умная улица"</h1>

        <!-- Панель навигации -->
        <ul class="nav nav-tabs" role="tablist">
            <li class="nav-item">
                <a class="nav-link active" id="lights-tab" data-bs-toggle="tab" href="#lights" role="tab">Освещение</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="traffic-tab" data-bs-toggle="tab" href="#traffic" role="tab">Светофоры</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="camera-tab" data-bs-toggle="tab" href="#camera" role="tab">Камеры безопасности</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="sensor-tab" data-bs-toggle="tab" href="#sensor" role="tab">Сенсоры</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="analys-tab" data-bs-toggle="tab" href="#analys" role="tab">Анализ данных</a>
            </li>
            <li class="nav-item ms-auto">
            <a class="nav-link" id="connect-device-tab" data-bs-toggle="tab" href="#connect-device" role="tab">Подключить девайс</a>
            </li>
        </ul>

        <div class="tab-content mt-4">
            <!-- Освещение -->
            <div class="tab-pane fade show active" id="lights" role="tabpanel">
                <h3>Управление освещением</h3>
                <!-- Кнопки для управления освещением -->

                <!-- Список освещения -->
                <ul class="list-group">
                    {% if lights %}
                        <div class="d-flex justify-content-between my-3">

                            <button class="btn btn-success" data-value="1">Включить все</button>
                            <button class="btn btn-danger" data-value="1">Выключить все</button>
                        </div>
                        <!-- Пример элемента освещени-->
                        {% for light in lights %}
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            Фонарь {{ light.id }} <span class="status">{{ light.status }}</span>
                            <div>
                                <button class="btn btn-primary btn-sm toggle-light">Включить</button>
                                <button class="btn btn-warning btn-sm toggle-light">Выключить</button>
                            </div>
                        </li>
                        {% endfor %}
                    {% else %}
                        <div style="margin: 0 auto">
                        <h2>Фонари не подключены</h2>
                        </div>
                    {% endif %}

                    <!-- Добавить другие элементы освещения здесь -->
                </ul>
            </div>

            <!-- Светофоры -->
            <div class="tab-pane fade" id="traffic" role="tabpanel">
                <h3>Управление светофорами</h3>

                <!-- Список светофоров -->
                <ul class="list-group">
                    {% if traffic_controllers %}
                        <!-- Кнопки для управления освещением -->
                    <div class="d-flex justify-content-between my-3">

                        <button class="btn btn-success">Включить все</button>
                        <button class="btn btn-danger">Выключить все</button>
                    </div>
                    <!-- Пример элемента светофора -->
                        {% for traffic_controller in traffic_controllers %}
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            Светофор 1 <span class="status">{{ traffic_controller.status }}</span>
                            <div>
                                <button class="btn btn-danger btn-sm toggle-status">Красный</button>
                                <button class="btn btn-warning btn-sm toggle-status">Желтый</button>
                                <button class="btn btn-success btn-sm toggle-status">Зеленый</button>
                            </div>
                        </li>
                        {% endfor %}
                    {% else %}
                        <div style="margin: 0 auto">
                        <h2>Светофоры не подключены</h2>
                        </div>

                    {% endif %}
                    <!-- Добавить другие элементы светофоров здесь -->
                </ul>
            </div>

            <!-- Камеры безопасности -->
            <div class="tab-pane fade" id="camera" role="tabpanel">
                <h3>Управление камерами безопасности</h3>
                <!-- Список камер безопасности -->
                <ul class="list-group">

                    {% if cameras %}
                        <!-- Кнопки для управления освещением -->
                                <div class="d-flex justify-content-between my-3">

                                    <button class="btn btn-success">Включить все</button>
                                    <button class="btn btn-danger">Выключить все</button>
                                </div>
                    <!-- Пример элемента камеры безопасности -->
                        {% for camera in cameras %}
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            Камера 1 <span class="status">{{ camera.status }}</span>
                            <div>
                                <button class="btn btn-primary btn-sm toggle-camera">Включить</button>
                                <button class="btn btn-warning btn-sm toggle-camera">Выключить</button>
                            </div>
                        </li>
                        {% endfor %}
                    {% else %}
                        <div style="margin: 0 auto">
                        <h2>Светофоры не подключены</h2>
                        </div>

                    {% endif %}
                    <!-- Добавить другие элементы камер безопасности здесь -->
                </ul>
            </div>

            <!-- Сенсоры -->
            <div class="tab-pane fade" id="sensor" role="tabpanel">
                <h3>Управление сенсорами</h3>
                <!-- Список сенсоров -->
                <ul class="list-group">

                    {% if sensors %}
                        <!-- Кнопки для управления освещением -->
                            <div class="d-flex justify-content-between my-3">

                                <button class="btn btn-success">Включить все</button>
                                <button class="btn btn-danger">Выключить все</button>
                            </div>
                    <!-- Пример элемента сенсора температуры -->
                        {% for sensor in sensors %}
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            Сенсор температуры 1 <span class="status">{{ sensor.sensor_type }}</span> <span class="temp-value">{{ sensor.value }}</span>
                            <div>
                                <button class="btn btn-primary btn-sm toggle-camera">Включить</button>
                                <button class="btn btn-warning btn-sm toggle-camera">Выключить</button>
                                <button class="btn btn-info btn-sm read-temp">Прочитать значение</button>
                            </div>
                        </li>
                        {% endfor %}
                    {% else %}
                        <div style="margin: 0 auto">
                        <h2>Светофоры не подключены</h2>
                        </div>
                    {% endif %}
                    <!-- Добавить другие элементы сенсоров здесь -->
                </ul>
            </div>
            <div class="tab-pane fade" id="connect-device" role="tabpanel">
                Контент для Подключить девайс
            </div>
        </div>
    </div>
</body>
<script>
        // Возможно, вы захотите добавить аналогичную функцию для кнопки "Выключить все"
        function handleDisableButtonClick(event) {
            const value = event.target.getAttribute('data-value');
            const url = `http://127.0.0.1:5000/set_off/${value}`; // Предполагается иной URL для выключения
            sendPostRequest(url, { value });
        }

        // Привязываем обработчик к кнопке "Выключить все"
        document.querySelector('.btn-danger').addEventListener('click', handleDisableButtonClick);
    </script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4" crossorigin="anonymous"></script>
</html>